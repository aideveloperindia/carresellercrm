(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{5631:function(e,a,r){Promise.resolve().then(r.bind(r,6575))},6575:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return i}});var s=r(7573),t=r(7653),l=r(7797),n=r(2991);function i(){let[e,a]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)({brand:"",model:"",year:"",registration:"",vin:"",mileage:"",price:"",status:"available",color:"",fuelType:"",transmission:"",notes:""});(0,t.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/cars"),r=await e.json();a(r)}catch(e){console.error("Error fetching cars:",e)}finally{i(!1)}},p=async e=>{e.preventDefault();try{(await fetch("/api/cars",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,year:h.year?parseInt(h.year):null,mileage:h.mileage?parseInt(h.mileage):null,price:parseFloat(h.price)})})).ok&&(c(!1),m({brand:"",model:"",year:"",registration:"",vin:"",mileage:"",price:"",status:"available",color:"",fuelType:"",transmission:"",notes:""}),u([]),x())}catch(e){console.error("Error creating car:",e)}},g=async(e,a)=>{try{await fetch("/api/cars/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})}),x()}catch(e){console.error("Error updating car status:",e)}};return r?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:"Loading..."})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.default,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Cars"}),(0,s.jsx)("button",{onClick:()=>c(!o),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:o?"Cancel":"Add Car"})]}),o&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Car"}),(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Brand *"}),(0,s.jsxs)("select",{required:!0,value:h.brand,onChange:e=>{let a=e.target.value;m({...h,brand:a,model:""}),u(a&&"Other"!==a&&n.p9[a]||[])},className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Brand..."}),n.EK.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Model ","Other"===h.brand?"(Enter Brand Name)":"*"]}),"Other"===h.brand?(0,s.jsx)("input",{type:"text",required:!0,value:h.model,onChange:e=>m({...h,model:e.target.value}),className:"w-full px-3 py-2 border rounded",placeholder:"Enter brand name"}):(0,s.jsxs)("select",{required:!0,value:h.model,onChange:e=>m({...h,model:e.target.value}),disabled:!h.brand||0===d.length,className:"w-full px-3 py-2 border rounded disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,s.jsx)("option",{value:"",children:h.brand?0===d.length?"No models available":"Select Model...":"Select brand first..."}),d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Year"}),(0,s.jsxs)("select",{value:h.year,onChange:e=>m({...h,year:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Year..."}),n.fi.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price (₹) *"}),(0,s.jsx)("input",{type:"number",required:!0,step:"0.01",value:h.price,onChange:e=>m({...h,price:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,s.jsxs)("select",{value:h.status,onChange:e=>m({...h,status:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"available",children:"Available"}),(0,s.jsx)("option",{value:"sold",children:"Sold"}),(0,s.jsx)("option",{value:"reserved",children:"Reserved"}),(0,s.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,s.jsx)("input",{type:"text",value:h.color,onChange:e=>m({...h,color:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Fuel Type"}),(0,s.jsxs)("select",{value:h.fuelType,onChange:e=>m({...h,fuelType:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Select"}),(0,s.jsx)("option",{value:"petrol",children:"Petrol"}),(0,s.jsx)("option",{value:"diesel",children:"Diesel"}),(0,s.jsx)("option",{value:"electric",children:"Electric"}),(0,s.jsx)("option",{value:"hybrid",children:"Hybrid"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Transmission"}),(0,s.jsxs)("select",{value:h.transmission,onChange:e=>m({...h,transmission:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Select"}),(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"automatic",children:"Automatic"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Mileage (km)"}),(0,s.jsx)("input",{type:"number",value:h.mileage,onChange:e=>m({...h,mileage:e.target.value}),className:"w-full px-3 py-2 border rounded"})]})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Create Car"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Brand"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Model"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Year"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Price"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Seller"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:e.brand}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.model}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.year||"-"}),(0,s.jsxs)("td",{className:"px-4 py-3",children:["₹",e.price.toLocaleString()]}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.seller?(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.seller.name}),e.seller.phone&&(0,s.jsx)("div",{className:"text-gray-600 text-xs",children:e.seller.phone})]}):(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("select",{value:e.status,onChange:a=>g(e.id,a.target.value),className:"px-2 py-1 border rounded",children:[(0,s.jsx)("option",{value:"available",children:"Available"}),(0,s.jsx)("option",{value:"sold",children:"Sold"}),(0,s.jsx)("option",{value:"reserved",children:"Reserved"}),(0,s.jsx)("option",{value:"maintenance",children:"Maintenance"})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("button",{onClick:()=>{let a=prompt("Enter new price:");a&&fetch("/api/cars/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:parseFloat(a)})}).then(()=>x())},className:"bg-blue-500 text-white px-2 py-1 rounded text-sm",children:"Update Price"})})]},e.id))})]})})]})]})}},7797:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var s=r(7573),t=r(2056),l=r.n(t),n=r(6072),i=r.n(n),o=r(2859),c=r(7653);function d(){let e=(0,o.useRouter)(),a=(0,o.usePathname)(),[r,t]=(0,c.useState)(!1),n=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/auth/login"),e.refresh()}catch(e){console.error("Logout error:",e)}},d=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/buyers",label:"Buyers",icon:"\uD83D\uDC65"},{href:"/sellers",label:"Sellers",icon:"\uD83C\uDFE2"},{href:"/cars",label:"Cars",icon:"\uD83D\uDE97"},{href:"/leads",label:"Leads",icon:"\uD83D\uDCCB"},{href:"/followups",label:"Follow-ups",icon:"\uD83D\uDCDE"}],u=e=>a===e;return(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)(l(),{href:"/",className:"flex items-center space-x-2 group",children:[(0,s.jsx)("div",{className:"w-10 h-10 flex items-center justify-center",children:(0,s.jsx)(i(),{src:"/raghavendra-logo.png",alt:"Car Reseller CRM Logo",width:40,height:40,className:"object-contain"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"Car Reseller CRM"})]}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-1",children:d.map(e=>(0,s.jsxs)(l(),{href:e.href,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,s.jsx)("span",{className:"mr-1.5",children:e.icon}),e.label]},e.href))}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(l(),{href:"/auth/change-password",className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)("span",{className:"mr-1.5",children:"⚙️"}),"Settings"]}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm hover:shadow",children:[(0,s.jsx)("span",{className:"mr-1.5",children:"\uD83D\uDEAA"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]}),(0,s.jsx)("button",{onClick:()=>t(!r),className:"md:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r&&(0,s.jsx)("div",{className:"md:hidden border-t border-gray-200 py-2",children:(0,s.jsxs)("nav",{className:"flex flex-col space-y-1",children:[d.map(e=>(0,s.jsxs)(l(),{href:e.href,onClick:()=>t(!1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,s.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.href)),(0,s.jsxs)(l(),{href:"/auth/change-password",onClick:()=>t(!1),className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)("span",{className:"mr-2",children:"⚙️"}),"Settings"]})]})})]})})}},2991:function(e,a,r){"use strict";r.d(a,{EK:function(){return s},fi:function(){return l},p9:function(){return t}});let s=["Maruti Suzuki","Hyundai","Tata","Mahindra","Toyota","Honda","Ford","Volkswagen","Nissan","Renault","Skoda","MG","Kia","Jeep","Mercedes-Benz","BMW","Audi","Volvo","Jaguar","Land Rover","Porsche","Other"],t={"Maruti Suzuki":["Alto","Wagon R","Swift","Dzire","Baleno","Celerio","Ignis","S-Presso","Ertiga","XL6","Vitara Brezza","S-Cross","Ciaz","Eeco","Omni"],Hyundai:["i10","i20","Grand i10","Aura","Verna","Elantra","Creta","Venue","Tucson","Kona","Santro","Xcent"],Tata:["Tiago","Tigor","Altroz","Nexon","Harrier","Safari","Punch","Indica","Indigo","Nano","Sumo","Hexa"],Mahindra:["XUV300","XUV500","XUV700","Scorpio","Bolero","Thar","Marazzo","KUV100","TUV300","Xylo","Verito"],Toyota:["Innova","Fortuner","Camry","Corolla","Etios","Yaris","Glanza","Urban Cruiser","Vellfire"],Honda:["City","Amaze","Civic","Accord","WR-V","CR-V","Brio","Jazz"],Ford:["EcoSport","Endeavour","Figo","Aspire","Freestyle","Mustang"],Volkswagen:["Polo","Vento","Virtus","Taigun","Tiguan","Passat"],Nissan:["Micra","Sunny","Terrano","Kicks","Magnite"],Renault:["Kwid","Triber","Duster","Lodgy","Captur","Kiger"],Skoda:["Rapid","Octavia","Superb","Kodiaq","Kushaq","Slavia"],MG:["Hector","Gloster","ZS EV","Astor","Comet"],Kia:["Seltos","Sonet","Carnival","EV6"],Jeep:["Compass","Wrangler","Meridian"],"Mercedes-Benz":["A-Class","C-Class","E-Class","S-Class","GLA","GLC","GLE","GLS"],BMW:["1 Series","2 Series","3 Series","5 Series","7 Series","X1","X3","X5","X7"],Audi:["A3","A4","A6","A8","Q3","Q5","Q7","Q8"],Volvo:["XC40","XC60","XC90","S60","S90"],Jaguar:["XE","XF","XJ","F-Pace","E-Pace"],"Land Rover":["Range Rover","Range Rover Sport","Range Rover Evoque","Discovery","Defender"],Porsche:["911","718","Panamera","Macan","Cayenne"],Other:[]},l=(()=>{let e=new Date().getFullYear(),a=[];for(let r=e+1;r>=1990;r--)a.push(r);return a})()},1105:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{unstable_getImgProps:function(){return o},default:function(){return c}});let s=r(7675),t=r(6415),l=r(7720),n=r(5136),i=s._(r(6206)),o=e=>{(0,l.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:a}=(0,t.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(a))void 0===r&&delete a[e];return{props:a}},c=n.Image},8294:function(e,a,r){"use strict";var s=r(7653),t=Symbol.for("react.element"),l=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,a,r){var s,l={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(d=a.ref),a)n.call(a,s)&&!o.hasOwnProperty(s)&&(l[s]=a[s]);if(e&&e.defaultProps)for(s in a=e.defaultProps)void 0===l[s]&&(l[s]=a[s]);return{$$typeof:t,type:e,key:c,ref:d,props:l,_owner:i.current}}a.Fragment=l,a.jsx=c,a.jsxs=c},7573:function(e,a,r){"use strict";e.exports=r(8294)},6072:function(e,a,r){e.exports=r(1105)},2056:function(e,a,r){e.exports=r(3040)},2859:function(e,a,r){e.exports=r(2988)}},function(e){e.O(0,[136,40,293,16,744],function(){return e(e.s=5631)}),_N_E=e.O()}]);