(()=>{var e={};e.id=951,e.ids=[951],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7243:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var t=r(9441),a=r(1498),n=r(6580),i=r.n(n),l=r(5511),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let d=["",{children:["buyers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1377)),"/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/buyers/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1883)),"/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,3250,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/buyers/[id]/page.tsx"],m="/buyers/[id]/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/buyers/[id]/page",pathname:"/buyers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4556:(e,s,r)=>{Promise.resolve().then(r.bind(r,3869))},109:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,9489,23)),Promise.resolve().then(r.t.bind(r,6225,23)),Promise.resolve().then(r.t.bind(r,5964,23)),Promise.resolve().then(r.t.bind(r,5804,23)),Promise.resolve().then(r.t.bind(r,7255,23)),Promise.resolve().then(r.t.bind(r,1021,23))},7459:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,7177,23)),Promise.resolve().then(r.t.bind(r,146,23))},3869:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(7685),a=r(3810),n=r(7986),i=r(1057),l=r(7452);function o(){let e=(0,n.useParams)();(0,n.useRouter)();let[s,r]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[c,m]=(0,a.useState)({name:"",phone:"",email:"",address:"",notes:""});(0,a.useEffect)(()=>{e.id&&u()},[e.id]);let u=async()=>{try{let s=await fetch(`/api/buyers/${e.id}`),t=await s.json();r(t),m({name:t.name||"",phone:t.phone||"",email:t.email||"",address:t.address||"",notes:t.notes||""})}catch(e){console.error("Error fetching buyer:",e)}finally{d(!1)}},h=async s=>{s.preventDefault();try{(await fetch(`/api/buyers/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(u(),alert("Buyer updated successfully"))}catch(e){console.error("Error updating buyer:",e)}},x=async()=>{try{await fetch(`/api/buyers/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({incrementVisits:!0})}),u()}catch(e){console.error("Error incrementing visits:",e)}};return o?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(i.default,{}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:"Loading..."})]}):s?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(i.default,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Buyer Details"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(l.Z,{phone:s.phone,recipientId:s.id,recipientType:"buyer",children:"WhatsApp"}),t.jsx("button",{onClick:x,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"+1 Visit"})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Buyer"}),(0,t.jsxs)("form",{onSubmit:h,children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:c.name,onChange:e=>m({...c,name:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone *"}),t.jsx("input",{type:"tel",required:!0,value:c.phone,onChange:e=>m({...c,phone:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),t.jsx("input",{type:"email",value:c.email,onChange:e=>m({...c,email:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),t.jsx("input",{type:"text",value:c.address,onChange:e=>m({...c,address:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),t.jsx("textarea",{value:c.notes,onChange:e=>m({...c,notes:e.target.value}),className:"w-full px-3 py-2 border rounded",rows:3})]})]}),t.jsx("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Update Buyer"})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Visits Count"}),t.jsx("p",{className:"text-lg font-semibold",children:s.visitsCount})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Created At"}),t.jsx("p",{className:"text-lg",children:new Date(s.createdAt).toLocaleDateString()})]})]})]})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(i.default,{}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:"Buyer not found"})]})}},1057:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(7685),a=r(2384),n=r.n(a),i=r(4950),l=r.n(i),o=r(7986),d=r(3810);function c(){let e=(0,o.useRouter)(),s=(0,o.usePathname)(),[r,a]=(0,d.useState)(!1),i=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/auth/login"),e.refresh()}catch(e){console.error("Logout error:",e)}},c=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/buyers",label:"Buyers",icon:"\uD83D\uDC65"},{href:"/sellers",label:"Sellers",icon:"\uD83C\uDFE2"},{href:"/cars",label:"Cars",icon:"\uD83D\uDE97"},{href:"/leads",label:"Leads",icon:"\uD83D\uDCCB"},{href:"/followups",label:"Follow-ups",icon:"\uD83D\uDCDE"}],m=e=>s===e;return t.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 group",children:[t.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:t.jsx(l(),{src:"/raghavendra-logo.png",alt:"Car Reseller CRM Logo",width:40,height:40,className:"object-contain"})}),t.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"Car Reseller CRM"})]}),t.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:c.map(e=>(0,t.jsxs)(n(),{href:e.href,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[t.jsx("span",{className:"mr-1.5",children:e.icon}),e.label]},e.href))}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n(),{href:"/auth/change-password",className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[t.jsx("span",{className:"mr-1.5",children:"⚙️"}),"Settings"]}),(0,t.jsxs)("button",{onClick:i,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm hover:shadow",children:[t.jsx("span",{className:"mr-1.5",children:"\uD83D\uDEAA"}),t.jsx("span",{className:"hidden sm:inline",children:"Logout"})]}),t.jsx("button",{onClick:()=>a(!r),className:"md:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r&&t.jsx("div",{className:"md:hidden border-t border-gray-200 py-2",children:(0,t.jsxs)("nav",{className:"flex flex-col space-y-1",children:[c.map(e=>(0,t.jsxs)(n(),{href:e.href,onClick:()=>a(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[t.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.href)),(0,t.jsxs)(n(),{href:"/auth/change-password",onClick:()=>a(!1),className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100",children:[t.jsx("span",{className:"mr-2",children:"⚙️"}),"Settings"]})]})})]})})}},7452:(e,s,r)=>{"use strict";r.d(s,{Z:()=>n});var t=r(7685),a=r(3810);function n({phone:e,body:s="Hello",recipientId:r,recipientType:n,className:i="",children:l}){let[o,d]=(0,a.useState)(!1),c=async()=>{if(!e){alert("Phone number is required");return}d(!0);try{let t=await fetch("/api/messages/wa-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,body:s,recipientId:r,recipientType:n})}),a=await t.json();a.waLink?window.open(a.waLink,"_blank"):a.error&&alert(a.error)}catch(e){console.error("Error creating WA link:",e),alert("Failed to create WhatsApp link")}finally{d(!1)}};return t.jsx("button",{onClick:c,disabled:o,className:`px-3 py-1.5 text-sm text-white bg-[#25D366] hover:bg-[#20BA5A] rounded-md flex items-center gap-2 transition-colors shadow-sm ${i} ${o?"opacity-50 cursor-not-allowed":""}`,title:"Send WhatsApp message",children:o?"Loading...":(0,t.jsxs)(t.Fragment,{children:[t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.382 1.262.625 1.694.818.717.312 1.37.267 1.885.162.57-.115 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),l||"WhatsApp"]})})}},7685:(e,s,r)=>{"use strict";e.exports=r(943).vendored["react-ssr"].ReactJsxRuntime},3883:(e,s,r)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var r in s)Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}(s,{unstable_getImgProps:function(){return o},default:function(){return d}});let t=r(3444),a=r(1920),n=r(4586),i=r(7177),l=t._(r(7868)),o=e=>{(0,n.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:s}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(s))void 0===r&&delete s[e];return{props:s}},d=i.Image},4950:(e,s,r)=>{e.exports=r(3883)},2384:(e,s,r)=>{e.exports=r(146)},7986:(e,s,r)=>{e.exports=r(7435)},1377:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let t=(0,r(599).createProxy)(String.raw`/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/buyers/[id]/page.tsx`),{__esModule:a,$$typeof:n}=t,i=t.default},1883:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m,metadata:()=>c});var t=r(6491),a=r(2169),n=r.n(a);r(1);var i=r(8275),l=r.n(i),o=r(8018),d=r.n(o);let c={title:"Car Reseller CRM",description:"CRM for used car resellers"};function m({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:n().className,children:(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[t.jsx("main",{className:"flex-grow",children:e}),t.jsx("footer",{className:"mt-auto py-4 px-6 bg-gray-50 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-2 text-sm text-gray-600",children:[t.jsx("span",{children:"Built by"}),(0,t.jsxs)(d(),{href:"https://www.aideveloperindia.store",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[t.jsx(l(),{src:"/raghavendra-logo.png",alt:"AI Developer India Logo",width:24,height:24,className:"object-contain"}),t.jsx("span",{className:"font-medium text-gray-700",children:"AI Developer India"})]})]})})]})})})}},1:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[975,443],()=>r(7243));module.exports=t})();