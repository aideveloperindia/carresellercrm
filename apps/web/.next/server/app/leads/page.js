(()=>{var e={};e.id=429,e.ids=[429],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7486:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(9441),a=s(1498),n=s(6580),l=s.n(n),i=s(5511),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["leads",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3508)),"/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/leads/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1883)),"/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3250,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/leads/page.tsx"],x="/leads/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/leads/page",pathname:"/leads",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8279:(e,t,s)=>{Promise.resolve().then(s.bind(s,7883))},109:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9489,23)),Promise.resolve().then(s.t.bind(s,6225,23)),Promise.resolve().then(s.t.bind(s,5964,23)),Promise.resolve().then(s.t.bind(s,5804,23)),Promise.resolve().then(s.t.bind(s,7255,23)),Promise.resolve().then(s.t.bind(s,1021,23))},7459:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,7177,23)),Promise.resolve().then(s.t.bind(s,146,23))},1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(7685),a=s(2384),n=s.n(a),l=s(4950),i=s.n(l),o=s(7986),d=s(3810);function c(){let e=(0,o.useRouter)(),t=(0,o.usePathname)(),[s,a]=(0,d.useState)(!1),l=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/auth/login"),e.refresh()}catch(e){console.error("Logout error:",e)}},c=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/buyers",label:"Buyers",icon:"\uD83D\uDC65"},{href:"/sellers",label:"Sellers",icon:"\uD83C\uDFE2"},{href:"/cars",label:"Cars",icon:"\uD83D\uDE97"},{href:"/leads",label:"Leads",icon:"\uD83D\uDCCB"},{href:"/followups",label:"Follow-ups",icon:"\uD83D\uDCDE"}],x=e=>t===e;return r.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 group",children:[r.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:r.jsx(i(),{src:"/raghavendra-logo.png",alt:"Car Reseller CRM Logo",width:40,height:40,className:"object-contain"})}),r.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"Car Reseller CRM"})]}),r.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:c.map(e=>(0,r.jsxs)(n(),{href:e.href,className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${x(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[r.jsx("span",{className:"mr-1.5",children:e.icon}),e.label]},e.href))}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(n(),{href:"/auth/change-password",className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx("span",{className:"mr-1.5",children:"⚙️"}),"Settings"]}),(0,r.jsxs)("button",{onClick:l,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm hover:shadow",children:[r.jsx("span",{className:"mr-1.5",children:"\uD83D\uDEAA"}),r.jsx("span",{className:"hidden sm:inline",children:"Logout"})]}),r.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&r.jsx("div",{className:"md:hidden border-t border-gray-200 py-2",children:(0,r.jsxs)("nav",{className:"flex flex-col space-y-1",children:[c.map(e=>(0,r.jsxs)(n(),{href:e.href,onClick:()=>a(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${x(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.href)),(0,r.jsxs)(n(),{href:"/auth/change-password",onClick:()=>a(!1),className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100",children:[r.jsx("span",{className:"mr-2",children:"⚙️"}),"Settings"]})]})})]})})}},7883:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7685),a=s(3810),n=s(1057),l=s(2384),i=s.n(l);function o(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[o,d]=(0,a.useState)([]),[c,x]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[g,b]=(0,a.useState)({buyerId:"",carId:"",source:"",status:"new",notes:""});(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{let[e,s,r]=await Promise.all([fetch("/api/leads"),fetch("/api/buyers"),fetch("/api/cars?status=available")]),[a,n,i]=await Promise.all([e.json(),s.json(),r.json()]),o=await Promise.all(a.map(async e=>{let t=e.buyerId?n.find(t=>t.id===e.buyerId):null,s=e.carId?i.find(t=>t.id===e.carId):null;return{...e,buyer:t,car:s}}));t(o),l(n),d(i.filter(e=>"available"===e.status))}catch(e){console.error("Error fetching data:",e)}finally{x(!1)}},y=async e=>{e.preventDefault(),p(!0);try{(await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,buyerId:g.buyerId||null,carId:g.carId||null})})).ok&&(h(!1),b({buyerId:"",carId:"",source:"",status:"new",notes:""}),f())}catch(e){console.error("Error creating lead:",e)}finally{p(!1)}},j=async(e,t)=>{try{await fetch(`/api/leads/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),f()}catch(e){console.error("Error updating lead status:",e)}},v=async e=>{try{await fetch(`/api/leads/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({incrementVisits:!0})}),f()}catch(e){console.error("Error incrementing visits:",e)}},N=e=>({new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-purple-100 text-purple-800",converted:"bg-green-100 text-green-800",lost:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return c?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx(n.default,{}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx(n.default,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Leads"}),r.jsx("p",{className:"text-gray-600",children:"Track sales opportunities and pipeline"})]}),(0,r.jsxs)("button",{onClick:()=>h(!u),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-2.5 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg font-medium",children:[r.jsx("span",{className:"text-lg",children:"+"}),u?"Cancel":"Create Lead"]})]}),u&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-100",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create New Lead"}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Buyer *"}),(0,r.jsxs)("select",{required:!0,value:g.buyerId,onChange:e=>b({...g,buyerId:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select a buyer..."}),s.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.phone,")"]},e.id))]}),0===s.length&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["No buyers found. ",r.jsx(i(),{href:"/buyers",className:"text-blue-600 hover:underline",children:"Add a buyer first"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Car *"}),(0,r.jsxs)("select",{required:!0,value:g.carId,onChange:e=>b({...g,carId:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select a car..."}),o.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.brand," ",e.model," ",e.year&&`(${e.year})`," - ₹",e.price.toLocaleString()]},e.id))]}),0===o.length&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["No available cars. ",r.jsx(i(),{href:"/cars",className:"text-blue-600 hover:underline",children:"Add a car first"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Source"}),(0,r.jsxs)("select",{value:g.source,onChange:e=>b({...g,source:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select source..."}),r.jsx("option",{value:"website",children:"Website"}),r.jsx("option",{value:"referral",children:"Referral"}),r.jsx("option",{value:"walk-in",children:"Walk-in"}),r.jsx("option",{value:"phone",children:"Phone Call"}),r.jsx("option",{value:"social-media",children:"Social Media"}),r.jsx("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:g.status,onChange:e=>b({...g,status:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"new",children:"New"}),r.jsx("option",{value:"contacted",children:"Contacted"}),r.jsx("option",{value:"qualified",children:"Qualified"}),r.jsx("option",{value:"converted",children:"Converted"}),r.jsx("option",{value:"lost",children:"Lost"})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{value:g.notes,onChange:e=>b({...g,notes:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Additional notes about this lead..."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),b({buyerId:"",carId:"",source:"",status:"new",notes:""})},className:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md hover:shadow-lg font-medium disabled:opacity-50",children:m?"Creating...":"Create Lead"})]})]})]}),0===e.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-100",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCB"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No leads found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first lead to start tracking sales opportunities"}),(0,r.jsxs)("button",{onClick:()=>h(!0),className:"inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg font-medium",children:[r.jsx("span",{children:"+"})," Create First Lead"]})]}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Buyer"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Car"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Source"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Visits"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.buyer?r.jsx(i(),{href:`/buyers/${e.buyer.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:e.buyer.name}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4",children:e.car?(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[e.car.brand," ",e.car.model,e.car.year&&` (${e.car.year})`]}),(0,r.jsxs)("div",{className:"text-gray-600",children:["₹",e.car.price.toLocaleString()]})]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:e.source||r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("select",{value:e.status,onChange:t=>j(e.id,t.target.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium border-0 focus:outline-none focus:ring-2 focus:ring-blue-500 ${N(e.status)}`,children:[r.jsx("option",{value:"new",children:"New"}),r.jsx("option",{value:"contacted",children:"Contacted"}),r.jsx("option",{value:"qualified",children:"Qualified"}),r.jsx("option",{value:"converted",children:"Converted"}),r.jsx("option",{value:"lost",children:"Lost"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:e.visitsCount})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>v(e.id),className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-medium",children:"+1 Visit"})})]},e.id))})]})})}),e.length>0&&(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Showing ",r.jsx("span",{className:"font-semibold text-gray-900",children:e.length})," ",1===e.length?"lead":"leads"]})]})]})}},7685:(e,t,s)=>{"use strict";e.exports=s(943).vendored["react-ssr"].ReactJsxRuntime},3883:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{unstable_getImgProps:function(){return o},default:function(){return d}});let r=s(3444),a=s(1920),n=s(4586),l=s(7177),i=r._(s(7868)),o=e=>{(0,n.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}},d=l.Image},4950:(e,t,s)=>{e.exports=s(3883)},2384:(e,t,s)=>{e.exports=s(146)},7986:(e,t,s)=>{e.exports=s(7435)},1883:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>c});var r=s(6491),a=s(2169),n=s.n(a);s(1);var l=s(8275),i=s.n(l),o=s(8018),d=s.n(o);let c={title:"Car Reseller CRM",description:"CRM for used car resellers"};function x({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:n().className,children:(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[r.jsx("main",{className:"flex-grow",children:e}),r.jsx("footer",{className:"mt-auto py-4 px-6 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-center gap-2 text-sm text-gray-600",children:[r.jsx("span",{children:"Built by"}),(0,r.jsxs)(d(),{href:"https://www.aideveloperindia.store",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[r.jsx(i(),{src:"/raghavendra-logo.png",alt:"AI Developer India Logo",width:24,height:24,className:"object-contain"}),r.jsx("span",{className:"font-medium text-gray-700",children:"AI Developer India"})]})]})})]})})})}},3508:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(599).createProxy)(String.raw`/Users/nandagiriaditya/Documents/carresellercrm/apps/web/app/leads/page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},1:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[975,443],()=>s(7486));module.exports=r})();