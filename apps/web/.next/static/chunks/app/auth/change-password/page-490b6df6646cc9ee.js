(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{3504:function(e,s,r){Promise.resolve().then(r.bind(r,8513))},8513:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return l}});var t=r(7573),a=r(7653),n=r(2859),o=r(7797);function l(){(0,n.useRouter)();let[e,s]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[f,x]=(0,a.useState)(!1),g=async t=>{if(t.preventDefault(),u(""),h(""),r!==i){u("New passwords do not match");return}if(r.length<6){u("New password must be at least 6 characters");return}x(!0);try{let t=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldPassword:e,newPassword:r})}),a=await t.json();if(!t.ok){u(a.error||"Failed to change password"),x(!1);return}h("Password changed successfully"),s(""),l(""),d(""),x(!1)}catch(e){u("An error occurred. Please try again."),x(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(o.default,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Change Password"}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow max-w-md",children:(0,t.jsxs)("form",{onSubmit:g,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"oldPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Old Password"}),(0,t.jsx)("input",{type:"password",id:"oldPassword",value:e,onChange:e=>s(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,t.jsx)("input",{type:"password",id:"newPassword",value:r,onChange:e=>l(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:i,onChange:e=>d(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c&&(0,t.jsx)("div",{className:"mb-4 text-red-600 text-sm",children:c}),m&&(0,t.jsx)("div",{className:"mb-4 text-green-600 text-sm",children:m}),(0,t.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50",children:f?"Changing...":"Change Password"})]})})]})]})}},7797:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(7573),a=r(2056),n=r.n(a),o=r(6072),l=r.n(o),i=r(2859),d=r(7653);function c(){let e=(0,i.useRouter)(),s=(0,i.usePathname)(),[r,a]=(0,d.useState)(!1),o=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/auth/login"),e.refresh()}catch(e){console.error("Logout error:",e)}},c=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/buyers",label:"Buyers",icon:"\uD83D\uDC65"},{href:"/sellers",label:"Sellers",icon:"\uD83C\uDFE2"},{href:"/cars",label:"Cars",icon:"\uD83D\uDE97"},{href:"/leads",label:"Leads",icon:"\uD83D\uDCCB"},{href:"/followups",label:"Follow-ups",icon:"\uD83D\uDCDE"}],u=e=>s===e;return(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(n(),{href:"/",className:"flex items-center space-x-2 group",children:[(0,t.jsx)("div",{className:"w-10 h-10 flex items-center justify-center",children:(0,t.jsx)(l(),{src:"/raghavendra-logo.png",alt:"Car Reseller CRM Logo",width:40,height:40,className:"object-contain"})}),(0,t.jsx)("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"Car Reseller CRM"})]}),(0,t.jsx)("nav",{className:"hidden md:flex items-center space-x-1",children:c.map(e=>(0,t.jsxs)(n(),{href:e.href,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"mr-1.5",children:e.icon}),e.label]},e.href))}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n(),{href:"/auth/change-password",className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)("span",{className:"mr-1.5",children:"⚙️"}),"Settings"]}),(0,t.jsxs)("button",{onClick:o,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm hover:shadow",children:[(0,t.jsx)("span",{className:"mr-1.5",children:"\uD83D\uDEAA"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]}),(0,t.jsx)("button",{onClick:()=>a(!r),className:"md:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r&&(0,t.jsx)("div",{className:"md:hidden border-t border-gray-200 py-2",children:(0,t.jsxs)("nav",{className:"flex flex-col space-y-1",children:[c.map(e=>(0,t.jsxs)(n(),{href:e.href,onClick:()=>a(!1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.href)),(0,t.jsxs)(n(),{href:"/auth/change-password",onClick:()=>a(!1),className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100",children:[(0,t.jsx)("span",{className:"mr-2",children:"⚙️"}),"Settings"]})]})})]})})}},1105:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var r in s)Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}(s,{unstable_getImgProps:function(){return i},default:function(){return d}});let t=r(7675),a=r(6415),n=r(7720),o=r(5136),l=t._(r(6206)),i=e=>{(0,n.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:s}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(s))void 0===r&&delete s[e];return{props:s}},d=o.Image},8294:function(e,s,r){"use strict";var t=r(7653),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,s,r){var t,n={},d=null,c=null;for(t in void 0!==r&&(d=""+r),void 0!==s.key&&(d=""+s.key),void 0!==s.ref&&(c=s.ref),s)o.call(s,t)&&!i.hasOwnProperty(t)&&(n[t]=s[t]);if(e&&e.defaultProps)for(t in s=e.defaultProps)void 0===n[t]&&(n[t]=s[t]);return{$$typeof:a,type:e,key:d,ref:c,props:n,_owner:l.current}}s.Fragment=n,s.jsx=d,s.jsxs=d},7573:function(e,s,r){"use strict";e.exports=r(8294)},6072:function(e,s,r){e.exports=r(1105)},2056:function(e,s,r){e.exports=r(3040)},2859:function(e,s,r){e.exports=r(2988)}},function(e){e.O(0,[136,40,293,16,744],function(){return e(e.s=3504)}),_N_E=e.O()}]);