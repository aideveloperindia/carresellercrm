(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{9675:function(e,s,t){Promise.resolve().then(t.bind(t,2632))},7797:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var l=t(7573),r=t(2056),a=t.n(r),n=t(6072),o=t.n(n),d=t(2859),c=t(7653);function i(){let e=(0,d.useRouter)(),s=(0,d.usePathname)(),[t,r]=(0,c.useState)(!1),n=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/auth/login"),e.refresh()}catch(e){console.error("Logout error:",e)}},i=[{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/buyers",label:"Buyers",icon:"\uD83D\uDC65"},{href:"/sellers",label:"Sellers",icon:"\uD83C\uDFE2"},{href:"/cars",label:"Cars",icon:"\uD83D\uDE97"},{href:"/leads",label:"Leads",icon:"\uD83D\uDCCB"},{href:"/followups",label:"Follow-ups",icon:"\uD83D\uDCDE"}],u=e=>s===e;return(0,l.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50",children:(0,l.jsxs)("div",{className:"container mx-auto px-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,l.jsxs)(a(),{href:"/",className:"flex items-center space-x-2 group",children:[(0,l.jsx)("div",{className:"w-10 h-10 flex items-center justify-center",children:(0,l.jsx)(o(),{src:"/raghavendra-logo.png",alt:"Car Reseller CRM Logo",width:40,height:40,className:"object-contain"})}),(0,l.jsx)("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"Car Reseller CRM"})]}),(0,l.jsx)("nav",{className:"hidden md:flex items-center space-x-1",children:i.map(e=>(0,l.jsxs)(a(),{href:e.href,className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,l.jsx)("span",{className:"mr-1.5",children:e.icon}),e.label]},e.href))}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)(a(),{href:"/auth/change-password",className:"hidden md:flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,l.jsx)("span",{className:"mr-1.5",children:"⚙️"}),"Settings"]}),(0,l.jsxs)("button",{onClick:n,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors shadow-sm hover:shadow",children:[(0,l.jsx)("span",{className:"mr-1.5",children:"\uD83D\uDEAA"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]}),(0,l.jsx)("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t?(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),t&&(0,l.jsx)("div",{className:"md:hidden border-t border-gray-200 py-2",children:(0,l.jsxs)("nav",{className:"flex flex-col space-y-1",children:[i.map(e=>(0,l.jsxs)(a(),{href:e.href,onClick:()=>r(!1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(u(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,l.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.href)),(0,l.jsxs)(a(),{href:"/auth/change-password",onClick:()=>r(!1),className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100",children:[(0,l.jsx)("span",{className:"mr-2",children:"⚙️"}),"Settings"]})]})})]})})}},2632:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var l=t(7573),r=t(7653),a=t(7797);function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)("all"),[c,i]=(0,r.useState)(!1),[u,h]=(0,r.useState)({leadId:"",buyerId:"",sellerId:"",carId:"",type:"",scheduledAt:"",notes:""});(0,r.useEffect)(()=>{x()},[o]);let x=async()=>{try{let e="all"===o?"/api/followups":"/api/followups?filter=".concat(o),t=await fetch(e),l=await t.json();s(l)}catch(e){console.error("Error fetching followups:",e)}finally{n(!1)}},m=async e=>{e.preventDefault();try{(await fetch("/api/followups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,leadId:u.leadId||null,buyerId:u.buyerId||null,sellerId:u.sellerId||null,carId:u.carId||null})})).ok&&(i(!1),h({leadId:"",buyerId:"",sellerId:"",carId:"",type:"",scheduledAt:"",notes:""}),x())}catch(e){console.error("Error creating followup:",e)}},p=async e=>{try{await fetch("/api/followups/".concat(e,"/complete"),{method:"PUT"}),x()}catch(e){console.error("Error completing followup:",e)}};return t?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(a.default,{}),(0,l.jsx)("main",{className:"container mx-auto px-4 py-8",children:"Loading..."})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(a.default,{}),(0,l.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Follow-ups"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"px-4 py-2 border rounded",children:[(0,l.jsx)("option",{value:"all",children:"All"}),(0,l.jsx)("option",{value:"today",children:"Today"}),(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"overdue",children:"Overdue"})]}),(0,l.jsx)("button",{onClick:()=>i(!c),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:c?"Cancel":"Add Follow-up"})]})]}),c&&(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Follow-up"}),(0,l.jsxs)("form",{onSubmit:m,children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type *"}),(0,l.jsx)("input",{type:"text",required:!0,value:u.type,onChange:e=>h({...u,type:e.target.value}),className:"w-full px-3 py-2 border rounded",placeholder:"call, visit, test-drive, payment, etc."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Scheduled At *"}),(0,l.jsx)("input",{type:"datetime-local",required:!0,value:u.scheduledAt,onChange:e=>h({...u,scheduledAt:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Lead ID"}),(0,l.jsx)("input",{type:"text",value:u.leadId,onChange:e=>h({...u,leadId:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Buyer ID"}),(0,l.jsx)("input",{type:"text",value:u.buyerId,onChange:e=>h({...u,buyerId:e.target.value}),className:"w-full px-3 py-2 border rounded"})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),(0,l.jsx)("textarea",{value:u.notes,onChange:e=>h({...u,notes:e.target.value}),className:"w-full px-3 py-2 border rounded",rows:3})]})]}),(0,l.jsx)("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Create Follow-up"})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left",children:"Type"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left",children:"Scheduled At"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left",children:"Notes"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"px-4 py-3",children:e.type}),(0,l.jsx)("td",{className:"px-4 py-3",children:new Date(e.scheduledAt).toLocaleString()}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.completed?(0,l.jsx)("span",{className:"text-green-600",children:"Completed"}):(0,l.jsx)("span",{className:"text-orange-600",children:"Pending"})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.notes||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:!e.completed&&(0,l.jsx)("button",{onClick:()=>p(e.id),className:"bg-green-500 text-white px-2 py-1 rounded text-sm",children:"Mark Complete"})})]},e.id))})]})})]})]})}},1105:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{unstable_getImgProps:function(){return d},default:function(){return c}});let l=t(7675),r=t(6415),a=t(7720),n=t(5136),o=l._(t(6206)),d=e=>{(0,a.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:s}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(s))void 0===t&&delete s[e];return{props:s}},c=n.Image},8294:function(e,s,t){"use strict";var l=t(7653),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function c(e,s,t){var l,a={},c=null,i=null;for(l in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(i=s.ref),s)n.call(s,l)&&!d.hasOwnProperty(l)&&(a[l]=s[l]);if(e&&e.defaultProps)for(l in s=e.defaultProps)void 0===a[l]&&(a[l]=s[l]);return{$$typeof:r,type:e,key:c,ref:i,props:a,_owner:o.current}}s.Fragment=a,s.jsx=c,s.jsxs=c},7573:function(e,s,t){"use strict";e.exports=t(8294)},6072:function(e,s,t){e.exports=t(1105)},2056:function(e,s,t){e.exports=t(3040)},2859:function(e,s,t){e.exports=t(2988)}},function(e){e.O(0,[136,40,293,16,744],function(){return e(e.s=9675)}),_N_E=e.O()}]);